!function(a,b,c){var d=function(a){for(var b in d.typeDetection){var c=d[b];if(c(a))return d.typeDetection[b]}return null};d.isString=function(a){return"string"==typeof a},d.isDate=function(a){return"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a)},d.isMoment=function(a){return c.isMoment(a)},d.typeDetection={isMoment:"moment",isString:"string",isDate:"date"};var e=function(a){return{set:function(b){var c=e.functions[a.data(e.DATATYPE_KEY)]||e.functions._default,d=c.set||e.functions._default.set;return d(a,b)},get:function(){var b=e.functions[a.data(e.DATATYPE_KEY)]||e.functions._default,c=b.get||e.functions._default.get;return c(a)},register:function(b){a.data(e.DATATYPE_KEY,b)}}};e.DATATYPE_KEY="datepicker.ko.dataType",e.functions={_default:{get:function(a){return a.datepicker("get")},set:function(a,b){a.datepicker("set",b)}},iso:{get:function(a){var b=a.datepicker("get");return b&&b.format("YYYY-MM-DD")},set:function(a,b){var d=c(b);a.datepicker("set",d)}},format:{get:function(a){return a.datepicker("getAsText")}},date:{get:function(a){var b=a.datepicker("get");return b&&b.toDate()}}},b.bindingHandlers.datepicker={init:function(c,f,g){var h=g().datepickerOptions||{},i=h.dataType||d(b.utils.unwrapObservable(f()));i=i&&"string"!=i?i:"iso";var j=a(c).datepicker(h);e(j).register(i),b.utils.registerEventHandler(c,"changeDate",function(a){var c=f();if(b.isObservable(c)){var d=e(j).get();c(d)}})},update:function(c,d){e(a(c)).set(b.utils.unwrapObservable(d()))}}}(jQuery,this.ko,this.moment),!function(a,b){var c=function(c,e){this.element=a(c),this.autoHide=e.autoHide!==!1&&this.element.data("datepicker-autohide")!==!1,this.format=e.format||this.element.data("datepicker-format")||b.localeData().longDateFormat("L"),this.calendarPlacement=e.calendarPlacement||this.element.data("datepicker-calendarplacement")||"right",this.picker=a(d.template).appendTo("body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)});var f=e.startDate||this.element.data("datepicker-startdate")||void 0;this.startDate=f?d.parseDate(f,this.format):void 0;var g=e.endDate||this.element.data("datepicker-enddate")||void 0;if(this.endDate=g?d.parseDate(g,this.format):void 0,this.isInput=this.element.is("input"),this.component=!this.isInput&&this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:a.proxy(this.show,this),blur:a.proxy(function(a){this.hide(),this.triggerChangeDate()},this),input:a.proxy(function(a){this.updateFromValue(!0)},this),keyup:a.proxy(function(a){13==a.keyCode&&this.updateFromValue()},this),click:a.proxy(this.show,this)}):this.component?this.component.on("click",a.proxy(this.show,this)):this.element.on("click",a.proxy(this.show,this)),this.minViewMode=e.minViewMode||this.element.data("datepicker-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=e.viewMode||this.element.data("datepicker-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=e.weekStart||this.element.data("datepicker-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.fillDow(),this.fillMonths(),this.setCustomClasses(),this.updateFromValue(),this.showMode(),this.refresh()};c.prototype={constructor:c,get:function(){return this.moment&&this.moment.clone()},getAsText:function(a){return this.moment&&this.moment.format(a||this.format)||""},show:function(b){this.picker.show(),this.height=this.component&&this.component.outerHeight()||this.element.outerHeight(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isInput||a(document).on("mousedown",a.proxy(this.hide,this)),this.element.trigger({type:"show"})},hide:function(){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.refresh(),this.element.trigger({type:"hide"})},refresh:function(){var a=this.getAsText();this.isInput?this.element.prop("value",a).change():(this.component&&this.element.find("input").prop("value",a).change(),this.element.data("date",a).change())},set:function(a,b){this.update(a,b),this.refresh()},place:function(){var a=this.component?this.component:this.element,b=a.offset();"left"==this.calendarPlacement?this.picker.css({top:b.top+this.height,left:b.left+a[0].offsetWidth-this.picker[0].offsetWidth}):this.picker.css({top:b.top+this.height,left:b.left})},lastValue:null,triggerChangeDate:function(){var a=this.moment?this.moment.valueOf():null;a!=this.lastValue&&(this.lastValue=a,this.element.trigger({type:"changeDate"})),this.autoHide&&this.hide()},updateFromValue:function(a){this.update(this.isInput?this.element.prop("value"):this.element.data("date"),a)},update:function(a,c){var e=this.moment?this.moment.valueOf():null;this.moment=d.parseDate(a,this.format);var f=this.moment?this.moment.valueOf():null;this.viewDate&&e==f||(this.viewDate=this.get()||b().hours(0).minutes(0).seconds(0).milliseconds(0),this.fill(),this.element.trigger({type:"changeDateInstant"})),c||this.triggerChangeDate()},fillDow:function(){for(var c=this.weekStart,d="<tr>",e=a.proxy(b.localeData().weekdaysMin,b.localeData());c<this.weekStart+7;)d+='<th class="dow">'+e(b().day(c++%7))+"</th>";d+="</tr>",this.picker.find(".datepicker-days thead").append(d)},fillMonths:function(){for(var c="",d=0,e=a.proxy(b.localeData().monthsShort,b.localeData());12>d;)c+='<span class="month">'+e(b().month(d++))+"</span>";this.picker.find(".datepicker-months td").append(c)},fill:function(){var a=this.viewDate.year(),c=this.viewDate.month(),d=this.get(),e=d?d.valueOf():null,f=d?d.year():null,g=d?d.month():null;this.picker.find(".datepicker-days th:eq(1)").text(b.localeData().months(b().month(c))+" "+a);var h=b([a,c,0]);h.day(h.day()-(h.day()-this.weekStart+7)%7);var i=b(h).add(42,"days").valueOf();html=[];for(var j;h.valueOf()<i;)h.day()===this.weekStart&&html.push("<tr>"),j="",h.year()<a||h.year()==a&&h.month()<c?j+=" old":(h.year()>a||h.year()==a&&h.month()>c)&&(j+=" new"),h.valueOf()===e&&(j+=" active"),(h.valueOf()<this.startDate||h.valueOf()>this.endDate)&&(j+=" disabled"),html.push('<td class="day'+j+'">'+h.date()+"</td>"),h.day()===this.weekEnd&&html.push("</tr>"),h.add(1,"days");this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var k=this.picker.find(".datepicker-months").find("th:eq(1)").text(a).end().find("span").removeClass("active").removeClass("disabled");f===a&&k.eq(g).addClass("active"),(this.startDate&&a<this.startDate.year()||this.endDate&&a>this.endDate.year())&&k.addClass("disabled"),this.startDate&&a==this.startDate.year()&&k.slice(0,this.startDate.month()).addClass("disabled"),this.endDate&&a==this.endDate.year()&&k.slice(this.endDate.month()+1).addClass("disabled"),html="",a=10*parseInt(a/10,10);var l=this.picker.find(".datepicker-years").find("th:eq(1)").text(a+"-"+(a+9)).end().find("td");a-=1;for(var m=-1;11>m;m++)html+='<span class="year'+(-1===m||10===m?" old":"")+(f===a?" active":"")+(this.startDate&&a<this.startDate.year()||this.endDate&&a>this.endDate.year()?" disabled":"")+'">'+a+"</span>",a+=1;l.html(html)},click:function(c){c.stopPropagation(),c.preventDefault();var e=a(c.target).closest("span, td, th");if(1===e.length)switch(e[0].nodeName.toLowerCase()){case"th":switch(e[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var f=d.modes[this.viewMode];this.viewDate.add(f.navStep*("prev"===e[0].className?-1:1),f.navFnc),this.fill(),this.refresh()}break;case"span":if(!e.is(".disabled")){if(e.is(".month")){var g=e.parent().find("span").index(e);this.viewDate.add(g-this.viewDate.month(),"months")}else{var h=parseInt(e.text(),10)||0;this.viewDate.year(h)}this.viewMode!==this.minViewMode?(this.showMode(-1),this.set(this.viewDate,!0)):this.set(this.viewDate)}break;case"td":if(!e.is(".disabled")&&e.is(".day")){var i=parseInt(e.text(),10)||1,j=this.viewDate.clone();e.is(".old")?j.startOf("month").add(-1,"days"):e.is(".new")&&j.endOf("month").add(1,"days");var k=j.month(),l=j.year();this.set(b([l,k,i]))}}},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).show()},setCustomClasses:function(){"left"==this.calendarPlacement&&this.picker.addClass("datepicker-left")}},a.fn.datepicker=function(b,d){var e=[],f=this.each(function(){var f=a(this),g=f.data("datepicker"),h="object"==typeof b&&b;if("string"==typeof b){if(g){var i=g[b](d);"undefined"!=typeof i&&e.push(i)}}else g||f.data("datepicker",g=new c(this,a.extend({},a.fn.datepicker.defaults,h)))});return 1==e.length?e[0]:e.length?e:f},a.fn.datepicker.defaults={},a.fn.datepicker.Constructor=c;var d={modes:[{clsName:"days",navFnc:"months",navStep:1},{clsName:"months",navFnc:"years",navStep:1},{clsName:"years",navFnc:"years",navStep:10}],parseDate:function(a,c){var d=null;return"string"==typeof a&&(d=b(a,c)),d&&d.isValid()||(d=b(a)),d&&d.isValid()?d.hours(0).minutes(0).seconds(0).milliseconds(0):null},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};d.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+"</table></div></div>"}(this.jQuery,this.moment);
//# sourceMappingURL=moment-datepicker.js.map